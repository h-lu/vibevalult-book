DROP TABLE IF EXISTS songs;
DROP TABLE IF EXISTS playlists;
DROP TABLE IF EXISTS users;

CREATE TABLE users (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    username VARCHAR(50) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL
);

CREATE TABLE playlists (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    owner_id BIGINT NOT NULL,
    name VARCHAR(255) NOT NULL,
    CONSTRAINT fk_playlists_owner FOREIGN KEY (owner_id) REFERENCES users(id)
);

CREATE TABLE songs (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    playlist_id BIGINT,
    title VARCHAR(255),
    artist VARCHAR(255),
    duration_in_seconds INTEGER NOT NULL,
    CONSTRAINT fk_songs_playlist FOREIGN KEY (playlist_id) REFERENCES playlists(id)
);

